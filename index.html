<!DOCTYPE html>
<html>

<head>
  <title>Double digital</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://polyfill.io/v3/polyfill.min.js?version=3.52.1&features=fetch"></script>
  <script src="https://js.stripe.com/v3/"></script>
</head>

<body onload="init()">
  <section>
    Commandez le double digital de votre objet :
    <div class="product">
      <img id="object-img" src="" style="max-width:200px;max-height:200px;"/>
      <div class="description">
        <h3>Double digital</h3>
        <h5>5.00&euro;</h5>
      </div>
    </div>
    <button type="submit" id="checkout-button" onclick="return checkout()">Checkout</button>
  </section>
  <script>
    var checkoutData = {}
    function init() {
      var s1 = location.search.substring(1, location.search.length).split('&'),
        s2, i;
      for (i = 0; i < s1.length; i += 1) {
        s2 = s1[i].split('=');
        checkoutData[decodeURIComponent(s2[0])] = decodeURIComponent(s2[1]);
      }
      document.getElementById("object-img").src=checkoutData["image"];
    };
    function checkout() {
      fetch("https://dev1.unikbase.dev/meveo/rest/strcheckout", {
        method: "POST",
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(checkoutData)
      }).then(res => {
        console.log("Request complete! response:", res);
      });
    }
  </script>
</body>

</html>